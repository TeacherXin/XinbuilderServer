"use strict";(self.webpackChunkddm_demo=self.webpackChunkddm_demo||[]).push([[29],{90546:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var a=n(1413),i=n(70885),l=n(42982),o=n(87363),r=n.n(o),s=n(80306),u=n(59155),c=n(763),d=n.n(c),h=n(53660),p=n(81821),v=n(80184),b=p.Typography.Paragraph;function f(e){var t=e.showJson,n=e.nowCom,a=e.setShowJson,i=function(e){return function(){a(e)}};return(0,v.jsx)(p.Modal,{open:t,className:"editStyle",onOk:i(!1),onCancel:i(!1),bodyStyle:{width:"800px",height:"400px"},closable:!1,children:(0,v.jsx)(b,{style:{maxWidth:440,marginTop:24},children:(0,v.jsx)("pre",{style:{border:"none",height:"370px",width:"450px",overflow:"auto"},children:JSON.stringify(n,null,2)})})})}var x=[{label:"\u67e5\u770bJSON",key:"showJson"},{label:"\u5220\u9664\u8282\u70b9",key:"deleteNode"}];function m(e){var t=d().cloneDeep(u.Z.getState().attributeMap),n=(0,o.useState)({}),a=(0,i.Z)(n,2),l=(a[0],a[1]),r=(0,o.useState)({}),s=(0,i.Z)(r,2),c=s[0],b=s[1],m=(0,o.useState)(!1),g=(0,i.Z)(m,2),y=g[0],Z=g[1];(0,h.Z)((function(){l({})}));var k=function(e,n){return function(a){("showJson"===a.key&&(Z(!0),b(e)),"deleteNode"===a.key)&&(n?delete function(e){for(var n in t){if(n===e)return t[n];if(t[n].childList)for(var a in t[n].childList)if(a===e)return t[n].childList[a]}}(n).childList[e.comId]:delete t[e.comId]);u.Z.dispatch({type:"change",attributeMap:t})}};return(0,v.jsxs)("div",{className:"leftList",children:[(0,v.jsx)(p.Tree,{showLine:!0,selectable:!1,treeData:function e(t,n){var a=[];for(var i in t)a.push({title:(0,v.jsx)("div",{children:(0,v.jsx)(p.Dropdown,{menu:{onClick:k(t[i],n),items:x},trigger:["contextMenu"],children:(0,v.jsx)("span",{children:i})})}),key:t[i].comId,children:e(t[i].childList,t[i].comId)});return a}(t),style:{background:"linear-gradient(rgb(234 213 210),rgb(236 235 202) ,#dbf0c7)"}}),(0,v.jsx)(f,{setShowJson:Z,nowCom:c,showJson:y})]})}var g=n(2487),y=n(30501),Z=n(53621),k=n(91342),C=n(56102),j=n(7974),S=n(47944),w=n(51635),X=n(35542),I=n(13876),D=n(93239),M=n(38007),T=n(31752),N=n(84791),L=n(99197),R=n(59560),V=n(29293),F=n(12261),A=n(76864),B=n(41938),J={XinCard:g.Z,XinForm:y.Z,XinMenu:Z.Z,XinRadioGroup:k.Z,XinButton:C.Z,XinCheckBox:j.Z,XinDatePicker:S.Z,XinIcon:w.Z,XinInput:X.Z,XinLable:I.Z,XinNumber:D.Z,XinRadio:M.Z,XinRate:T.Z,XinUpload:N.Z,XinTable:L.Z,XinFlex:R.Z,XinLink:V.Z,XinDiv:F.Z,XinCarousel:g.Z},z={XinCard:"\u5361\u7247",XinForm:"\u8868\u5355",XinMenu:"\u83dc\u5355",XinRadioGroup:"\u5355\u9009\u680f",XinButton:"\u6309\u94ae",XinCheckBox:"\u591a\u9009\u6309\u94ae",XinDatePicker:"\u65e5\u671f\u6846",XinIcon:"\u56fe\u6807",XinInput:"\u8f93\u5165\u6846",XinLable:"\u6807\u7b7e",XinNumber:"\u6570\u503c\u6846",XinRadio:"\u5355\u9009\u6846",XinRate:"\u8bc4\u5206",XinUpload:"\u56fe\u7247\u4e0a\u4f20",XinTable:"\u8868\u683c",XinFlex:"Flex\u5e03\u5c40",XinLink:"\u9875\u9762\u8df3\u8f6c",XinDiv:"\u7a7adiv",XinCarousel:"\u8f6e\u64ad\u56fe"},P=p.Collapse.Panel;function q(e){var t=e.changeTopCom,n=(0,o.useState)(1),a=(0,i.Z)(n,2),r=a[0],u=a[1],c=(0,o.useState)([]),d=(0,i.Z)(c,2),h=d[0],b=d[1],f=(0,o.useState)([]),x=(0,i.Z)(f,2),g=x[0],y=x[1],Z=(0,o.useState)([]),k=(0,i.Z)(Z,2),C=k[0],j=k[1],S=(0,o.useState)(!0),w=(0,i.Z)(S,2),X=w[0],I=w[1];(0,o.useEffect)((function(){Object.keys(s).forEach((function(e){["XinForm","XinMenu","XinRadioGroup","XinCard","XinFlex","XinCarousel"].includes(e)?h.push(e):["XinTable","XinDiv"].includes(e)?C.push(e):g.push(e)})),b((0,l.Z)(h)),y((0,l.Z)(g)),j((0,l.Z)(C))}),[]);var D=function(e,n){return function(){t({component:e,name:n})}};return X?(0,v.jsxs)("div",{className:"leftCom",children:[(0,v.jsxs)("div",{className:"Tab",children:[(0,v.jsx)("p",{onClick:function(){u(1)},style:{background:2===r?"rgb(240 203 203)":""},className:"TabItem",children:"\u7ec4\u4ef6"}),(0,v.jsxs)("p",{onClick:function(){u(2)},style:{background:1===r?"rgb(240 203 203)":""},className:"TabItem",children:["\u6570\u636e",(0,v.jsx)(A.Z,{onClick:function(){I(!1)},style:{color:"blue",cursor:"pointer",position:"relative",left:"30px"}})]})]}),1===r?(0,v.jsx)("div",{className:"componentList",children:(0,v.jsxs)(p.Collapse,{defaultActiveKey:["1"],style:{width:"100%",background:"none",height:"100%",overflow:"auto"},children:[(0,v.jsx)(P,{header:"\u5bb9\u5668\u7c7b\u578b\u7ec4\u4ef6",style:{background:"none",height:"100%"},children:h.map((function(e){var t=s[e],n=J[e],a=z[e];return(0,v.jsx)("div",{onDragStart:D(t,e),className:"componentItem",children:(0,v.jsxs)("div",{style:{display:"inline-block"},draggable:!0,children:[(0,v.jsx)(n,{style:{marginRight:"10px"}}),a]})},e)}))},"1"),(0,v.jsx)(P,{header:"\u6570\u636e\u5f55\u5165\u7ec4\u4ef6",children:g.map((function(e){var t=s[e],n=J[e],a=z[e];return(0,v.jsx)("div",{onDragStart:D(t,e),className:"componentItem",children:(0,v.jsxs)("div",{style:{display:"inline-block"},draggable:!0,children:[(0,v.jsx)(n,{style:{marginRight:"10px"}}),a]})},e)}))},"2"),(0,v.jsx)(P,{header:"\u6570\u636e\u5c55\u793a\u7ec4\u4ef6",children:C.map((function(e){var t=s[e],n=J[e],a=z[e];return(0,v.jsx)("div",{onDragStart:D(t,e),className:"componentItem",children:(0,v.jsxs)("div",{style:{display:"inline-block"},draggable:!0,children:[(0,v.jsx)(n,{style:{marginRight:"10px"}}),a]})},e)}))},"3"),(0,v.jsx)(P,{header:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",children:(0,v.jsx)("div",{onDragStart:D("defineCom","defineCom"),className:"componentItem",children:(0,v.jsx)("div",{style:{display:"inline-block"},draggable:!0,children:"defineCom"})})},"4")]})}):(0,v.jsx)(m,{})]}):(0,v.jsx)(B.Z,{onClick:function(){I(!0)},style:{color:"blue",cursor:"pointer"}})}var E=n(4942),O=n(74165),H=n(15861),G=n(44925),U=["index"],Y=["title","editable","children","dataIndex","record","handleSave"],K=r().createContext(null),W={body:{row:function(e){e.index;var t=(0,G.Z)(e,U),n=p.Form.useForm(),l=(0,i.Z)(n,1)[0];return(0,v.jsx)(p.Form,{form:l,component:!1,children:(0,v.jsx)(K.Provider,{value:l,children:(0,v.jsx)("tr",(0,a.Z)({},t))})})},cell:function(e){var t=e.title,n=e.editable,l=e.children,r=e.dataIndex,s=e.record,u=e.handleSave,c=(0,G.Z)(e,Y),d=(0,o.useState)(!1),h=(0,i.Z)(d,2),b=h[0],f=h[1],x=(0,o.useRef)(null),m=(0,o.useContext)(K);(0,o.useEffect)((function(){b&&x.current.focus()}),[b]);var g=function(){f(!b),m.setFieldsValue((0,E.Z)({},r,s[r]))},y=function(){var e=(0,H.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.validateFields();case 3:t=e.sent,g(),u((0,a.Z)((0,a.Z)({},s),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Z=l;return n&&(Z=b?(0,v.jsx)(p.Form.Item,{style:{margin:0},name:r,rules:[{required:!0,message:"".concat(t," is required.")}],children:(0,v.jsx)(p.Input,{ref:x,onPressEnter:y,onBlur:y})}):(0,v.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:g,children:l})),(0,v.jsx)("td",(0,a.Z)((0,a.Z)({},c),{},{children:Z}))}}};function _(e){var t,n=e.showSetColumns,r=e.setShowSetColumns,s=e.comId,c=d().cloneDeep(u.Z.getState().attributeMap),b=(0,o.useState)({}),f=(0,i.Z)(b,2),x=(f[0],f[1]),m=(0,o.useState)(3),g=(0,i.Z)(m,2),y=g[0],Z=g[1],k=[{title:"\u6807\u9898",dataIndex:"title",key:"title",editable:!0},{title:"\u7c7b\u578b",dataIndex:"type",key:"type",editable:!0},{title:"dataIndex",dataIndex:"dataIndex",key:"dataIndex",editable:!0},{title:"key",dataIndex:"key",key:"key",editable:!0},{title:"operation",dataIndex:"operation",render:function(e,t){return C(s).columnsData.length>=1?(0,v.jsx)(p.Popconfirm,{title:"Sure to delete?",onConfirm:function(){return S(t.key)},children:(0,v.jsx)("a",{children:"Delete"})}):null}}];(0,h.Z)((function(){x({})}),[]);var C=function(e){for(var t in c){if(t===e)return c[t];if(c[t].childList)for(var n in c[t].childList)if(n===e)return c[t].childList[n]}},j=k.map((function(e){return e.editable?(0,a.Z)((0,a.Z)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:w}}}):e})),S=function(e){var t,n,a=null===(t=C(s))||void 0===t?void 0:t.columnsData.findIndex((function(t){return t.key===e}));null===(n=C(s))||void 0===n||n.columnsData.splice(a,1),u.Z.dispatch({type:"change",attributeMap:c})},w=function(e){var t,n=(0,l.Z)(null===(t=C(s))||void 0===t?void 0:t.columnsData),i=n.findIndex((function(t){return e.key===t.key})),o=n[i];n.splice(i,1,(0,a.Z)((0,a.Z)({},o),e)),C(s).columnsData=n,u.Z.dispatch({type:"change",attributeMap:c})};return(0,v.jsx)("div",{children:(0,v.jsxs)(p.Modal,{open:n,className:"editStyle",width:1e3,closable:!0,footer:null,onCancel:function(){r(!1)},children:[(0,v.jsx)(p.Button,{onClick:function(){var e,t=(0,E.Z)({key:y,title:"\u6807\u9898".concat(y),type:"\u6587\u672c",dataIndex:"dataIndex".concat(y)},"key","key".concat(y));null===(e=C(s))||void 0===e||e.columnsData.push(t),u.Z.dispatch({type:"change",attributeMap:c}),Z(y+1)},type:"primary",style:{marginBottom:16},children:"Add a row"}),(0,v.jsx)(p.Table,{columns:j,dataSource:null===(t=C(s))||void 0===t?void 0:t.columnsData,components:W,rowClassName:function(){return"editable-row"},bordered:!0,scroll:{y:300},pagination:!1})]})})}var Q,$=["index"],ee=["title","editable","children","dataIndex","record","handleSave"],te=r().createContext(null),ne={body:{row:function(e){e.index;var t=(0,G.Z)(e,$),n=p.Form.useForm(),l=(0,i.Z)(n,1)[0];return(0,v.jsx)(p.Form,{form:l,component:!1,children:(0,v.jsx)(te.Provider,{value:l,children:(0,v.jsx)("tr",(0,a.Z)({},t))})})},cell:function(e){var t=e.title,n=e.editable,l=e.children,r=e.dataIndex,s=e.record,u=e.handleSave,c=(0,G.Z)(e,ee),d=(0,o.useState)(!1),h=(0,i.Z)(d,2),b=h[0],f=h[1],x=(0,o.useRef)(null),m=(0,o.useContext)(te);(0,o.useEffect)((function(){b&&x.current.focus()}),[b]);var g=function(){f(!b),m.setFieldsValue((0,E.Z)({},r,s[r]))},y=function(){var e=(0,H.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.validateFields();case 3:t=e.sent,g(),u((0,a.Z)((0,a.Z)({},s),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Z=l;return n&&(Z=b?(0,v.jsx)(p.Form.Item,{style:{margin:0},name:r,rules:[{required:!0,message:"".concat(t," is required.")}],children:(0,v.jsx)(p.Input,{ref:x,onPressEnter:y,onBlur:y})}):(0,v.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:g,children:l})),(0,v.jsx)("td",(0,a.Z)((0,a.Z)({},c),{},{children:Z}))}}};function ae(e){var t,n=e.showSetTableData,r=e.setShowTableData,s=e.comId,c=d().cloneDeep(u.Z.getState().attributeMap),b=(0,o.useState)({}),f=(0,i.Z)(b,2),x=(f[0],f[1]),m=(0,o.useState)(3),g=(0,i.Z)(m,2),y=g[0],Z=g[1],k=(0,o.useState)([]),C=(0,i.Z)(k,2),j=C[0],S=C[1],w=[{title:"key",dataIndex:"key",key:"key",editable:!0},{title:"operation",dataIndex:"operation",render:function(e,t){return j.length>=1?(0,v.jsx)(p.Popconfirm,{title:"Sure to delete?",onConfirm:function(){return D(t.key)},children:(0,v.jsx)("a",{children:"Delete"})}):null}}];(0,o.useEffect)((function(){var e,t;((null===(e=X(s))||void 0===e?void 0:e.columnsData)||[]).forEach((function(e){e.editable=!0})),S([].concat((0,l.Z)((null===(t=X(s))||void 0===t?void 0:t.columnsData)||[]),w))}),[n]),(0,h.Z)((function(){x({})}),[]);var X=function(e){for(var t in c){if(t===e)return c[t];if(c[t].childList)for(var n in c[t].childList)if(n===e)return c[t].childList[n]}},I=j.map((function(e){return e.editable?(0,a.Z)((0,a.Z)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:M}}}):e})),D=function(e){var t,n,a=null===(t=X(s))||void 0===t?void 0:t.tableData.findIndex((function(t){return t.key===e}));null===(n=X(s))||void 0===n||n.tableData.splice(a,1),u.Z.dispatch({type:"change",attributeMap:c})},M=function(e){var t,n=(0,l.Z)(null===(t=X(s))||void 0===t?void 0:t.tableData),i=n.findIndex((function(t){return e.key===t.key})),o=n[i];n.splice(i,1,(0,a.Z)((0,a.Z)({},o),e)),X(s).tableData=n,u.Z.dispatch({type:"change",attributeMap:c})};return(0,v.jsx)("div",{children:(0,v.jsxs)(p.Modal,{open:n,className:"editStyle",width:1e3,closable:!0,footer:null,onCancel:function(){r(!1)},children:[(0,v.jsx)(p.Button,{onClick:function(){for(var e=X(s).columnsData,t={},n=0;n<e.length;n++)t[e[n].dataIndex]=e[n].dataIndex+y;t.key=y,X(s).tableData?X(s).tableData.push(t):X(s).tableData=[t],u.Z.dispatch({type:"change",attributeMap:c}),Z(y+1)},type:"primary",style:{marginBottom:16},children:"Add a row"}),(0,v.jsx)(p.Table,{scroll:{y:300},columns:I,dataSource:null===(t=X(s))||void 0===t?void 0:t.tableData,components:ne,rowClassName:function(){return"editable-row"},bordered:!0,pagination:!1})]})})}var ie=(Q={attributeValue:"\u5c5e\u6027\u503c",size:"\u5927\u5c0f",disabled:"\u662f\u5426\u7981\u7528",addonBefore:"\u524d\u7f6e\u6807\u7b7e",addonAfter:"\u540e\u7f6e\u6807\u7b7e",placeholder:"\u9ed8\u8ba4\u63d0\u793a",url:"URL\u5730\u5740",openType:"\u65b0\u9875\u7b7e\u6253\u5f00",listItemNum:"\u5b50\u5143\u7d20",title:"\u6807\u9898",buttonType:"\u6309\u94ae\u7c7b\u578b"},(0,E.Z)(Q,"size","\u7ec4\u4ef6\u5927\u5c0f"),(0,E.Z)(Q,"danger","\u5371\u9669\u6309\u94ae"),(0,E.Z)(Q,"ghost","\u5e7d\u7075\u6309\u94ae"),(0,E.Z)(Q,"prefix","\u524d\u7f00"),(0,E.Z)(Q,"suffix","\u540e\u7f00"),(0,E.Z)(Q,"allowClear","\u5141\u8bb8\u6e05\u9664"),(0,E.Z)(Q,"showCount","\u5c55\u793a\u5b57\u6570"),(0,E.Z)(Q,"checked","\u662f\u5426\u9009\u4e2d"),(0,E.Z)(Q,"label","\u6807\u7b7e"),(0,E.Z)(Q,"layout","\u5e03\u5c40"),(0,E.Z)(Q,"required","\u5fc5\u586b"),(0,E.Z)(Q,"requiredMessage","\u5fc5\u586b\u63d0\u793a"),(0,E.Z)(Q,"colon","\u6807\u9898\u5192\u53f7"),(0,E.Z)(Q,"labelAlign","\u6807\u9898\u5bf9\u9f50\u65b9\u5f0f"),(0,E.Z)(Q,"iconType","\u56fe\u6807\u7c7b\u578b"),(0,E.Z)(Q,"twoToneColor","\u4e3b\u9898\u8272"),(0,E.Z)(Q,"rotate","\u65cb\u8f6c\u89d2\u5ea6"),(0,E.Z)(Q,"mode","\u83dc\u5355\u7c7b\u578b"),(0,E.Z)(Q,"visible","\u9690\u85cf"),(0,E.Z)(Q,"picker","\u65e5\u671f\u7c7b\u578b"),(0,E.Z)(Q,"showTime","\u5c55\u793a\u65f6\u95f4"),(0,E.Z)(Q,"dateFormat","\u65e5\u671f\u683c\u5f0f"),(0,E.Z)(Q,"attributeValueNumber","\u5c5e\u6027\u503c"),(0,E.Z)(Q,"max","\u6700\u5927\u503c"),(0,E.Z)(Q,"min","\u6700\u5c0f\u503c"),(0,E.Z)(Q,"step","\u6b65\u6570\u5927\u5c0f"),(0,E.Z)(Q,"optionType","\u5355\u9009\u7c7b\u578b"),(0,E.Z)(Q,"buttonStyle","\u6309\u94ae\u98ce\u683c"),(0,E.Z)(Q,"selectedID","\u9009\u4e2d\u8282\u70b9ID"),(0,E.Z)(Q,"allowHalf","\u5141\u8bb8\u534a\u9009"),(0,E.Z)(Q,"count","star\u603b\u6570"),(0,E.Z)(Q,"disabled","\u7981\u7528"),(0,E.Z)(Q,"bordered","\u8fb9\u6846"),(0,E.Z)(Q,"setColumns","\u8868\u5934\u5b57\u6bb5"),(0,E.Z)(Q,"setTableData","\u8868\u683c\u5185\u5bb9"),(0,E.Z)(Q,"showHeader","\u7981\u7528\u8868\u5934"),(0,E.Z)(Q,"selectedKey","\u9009\u4e2d\u83dc\u5355key"),(0,E.Z)(Q,"pageUrl","\u9875\u9762ID"),(0,E.Z)(Q,"autoplay","\u81ea\u52a8\u5207\u6362"),Q);function le(e){var t=e.rightPanel,n=e.comId,a=(0,o.useState)(!1),l=(0,i.Z)(a,2),r=l[0],s=l[1],c=(0,o.useState)(!1),b=(0,i.Z)(c,2),f=b[0],x=b[1],m=d().cloneDeep(u.Z.getState().attributeMap),g=(0,o.useState)({}),y=(0,i.Z)(g,2),Z=(y[0],y[1]),k=(0,o.useState)(!0),C=(0,i.Z)(k,2),j=C[0],S=C[1];(0,h.Z)((function(){Z({})}));var w=function(e){for(var t in m){if(t===e)return m[t];if(m[t].childList)for(var n in m[t].childList)if(n===e)return m[t].childList[n]}},X=function(e,t){switch(e){case"disabled":var a;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(a=w(n))||void 0===a?void 0:a[e])||!1});case"autoplay":var i;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(i=w(n))||void 0===i?void 0:i[e])||!1});case"showHeader":var l;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(l=w(n))||void 0===l?void 0:l[e])||!1});case"bordered":var o;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(o=w(n))||void 0===o?void 0:o[e])||!1});case"allowHalf":var r;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(r=w(n))||void 0===r?void 0:r[e])||!1});case"visible":var u;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!0,onChange:I(e),checked:(null===(u=w(n))||void 0===u?void 0:u[e])||!1});case"showTime":var c;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!0,onChange:I(e),checked:(null===(c=w(n))||void 0===c?void 0:c[e])||!1});case"labelAlign":var d;return(0,v.jsx)(p.Select,{style:{width:120,height:25},defaultValue:"right",onChange:I(e),value:(null===(d=w(n))||void 0===d?void 0:d[e])||"right",options:[{label:"\u5de6\u4fa7",value:"left"},{label:"\u53f3\u4fa7",value:"right"}]});case"optionType":var h;return(0,v.jsx)(p.Select,{style:{width:120,height:25},defaultValue:"default",onChange:I(e),value:(null===(h=w(n))||void 0===h?void 0:h[e])||"default",options:[{label:"\u9ed8\u8ba4",value:"default"},{label:"\u6309\u94ae",value:"button"}]});case"buttonStyle":var b;return(0,v.jsx)(p.Select,{style:{width:120,height:25},defaultValue:"outline ",onChange:I(e),value:(null===(b=w(n))||void 0===b?void 0:b[e])||"outline ",options:[{label:"\u865a\u7ebf",value:"outline "},{label:"\u5b9e\u7ebf",value:"solid"}]});case"picker":var f;return(0,v.jsx)(p.Select,{style:{width:120,height:25},defaultValue:"date",onChange:I(e),value:(null===(f=w(n))||void 0===f?void 0:f[e])||"date",options:[{label:"\u65e5\u671f",value:"date"},{label:"\u5468\u4efd",value:"week"},{label:"\u6708\u4efd",value:"month"},{label:"\u5b63\u5ea6",value:"quarter"},{label:"\u5e74\u4efd",value:"year"}]});case"checked":var m;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(m=w(n))||void 0===m?void 0:m[e])||!1});case"colon":var g,y;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},onChange:I(e),checked:void 0===(null===(g=w(n))||void 0===g?void 0:g[e])||(null===(y=w(n))||void 0===y?void 0:y[e])});case"danger":var Z;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(Z=w(n))||void 0===Z?void 0:Z[e])||!1});case"required":var k;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(k=w(n))||void 0===k?void 0:k[e])||!1});case"ghost":var C;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(C=w(n))||void 0===C?void 0:C[e])||!1});case"allowClear":var j;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(j=w(n))||void 0===j?void 0:j[e])||!1});case"showCount":var S;return(0,v.jsx)(p.Switch,{style:{marginRight:"70px"},defaultValue:!1,onChange:I(e),checked:(null===(S=w(n))||void 0===S?void 0:S[e])||!1});case"buttonType":var X;return(0,v.jsx)(p.Select,{style:{width:120,height:20},defaultValue:"primary",onChange:I(e),value:(null===(X=w(n))||void 0===X?void 0:X[e])||"primary",options:[{label:"\u9ed8\u8ba4\u6309\u94ae",value:"primary"},{label:"\u865a\u7ebf\u6309\u94ae",value:"dashed"},{label:"\u6587\u672c\u6309\u94ae",value:"text"},{label:"\u94fe\u63a5\u6309\u94ae",value:"link"}]});case"size":var D;return(0,v.jsx)(p.Select,{style:{width:120,height:25},defaultValue:"default",onChange:I(e),value:(null===(D=w(n))||void 0===D?void 0:D[e])||"default",options:[{label:"\u5927",value:"large"},{label:"\u5c0f",value:"small"},{label:"\u4e2d",value:"default"}]});case"layout":var M;return(0,v.jsx)(p.Select,{style:{width:120,height:25},defaultValue:"horizontal",value:(null===(M=w(n))||void 0===M?void 0:M[e])||"horizontal",onChange:I(e),options:[{label:"\u6c34\u5e73",value:"horizontal"},{label:"\u7ad6\u76f4",value:"vertical"}]});case"mode":var T;return(0,v.jsx)(p.Select,{style:{width:120,height:25},defaultValue:"vertical",value:(null===(T=w(n))||void 0===T?void 0:T[e])||"vertical",onChange:I(e),options:[{label:"\u6c34\u5e73",value:"horizontal"},{label:"\u7ad6\u76f4",value:"vertical"},{label:"\u5185\u5d4c",value:"inline"}]});case"setColumns":return(0,v.jsx)(p.Button,{onClick:function(){s(!0)},style:{width:"130px",position:"relative",bottom:"5px",left:"20px"},children:"\u8bbe\u7f6e\u8868\u5934"});case"setTableData":return(0,v.jsx)(p.Button,{onClick:function(){x(!0)},style:{width:"130px",position:"relative",bottom:"5px",left:"20px"},children:"\u8bbe\u7f6e\u5185\u5bb9"});case"attributeValueNumber":var N;return(0,v.jsx)(p.Input,{style:{width:120,height:30},type:"number",onChange:I(e),value:(null===(N=w(n))||void 0===N?void 0:N[e])||""},t);case"count":var L;return(0,v.jsx)(p.Input,{style:{width:120,height:30},type:"number",onChange:I(e),value:(null===(L=w(n))||void 0===L?void 0:L[e])||""},t);case"step":var R;return(0,v.jsx)(p.Input,{style:{width:120,height:30},type:"number",onChange:I(e),value:(null===(R=w(n))||void 0===R?void 0:R[e])||""},t);case"max":var V;return(0,v.jsx)(p.Input,{style:{width:120,height:30},type:"number",onChange:I(e),value:(null===(V=w(n))||void 0===V?void 0:V[e])||""},t);case"min":var F;return(0,v.jsx)(p.Input,{style:{width:120,height:30},type:"number",onChange:I(e),value:(null===(F=w(n))||void 0===F?void 0:F[e])||""},t);case"rotate":var A;return(0,v.jsx)(p.Input,{style:{width:120,height:30},type:"number",onChange:I(e),value:(null===(A=w(n))||void 0===A?void 0:A[e])||""},t);default:var B;return(0,v.jsx)(p.Input,{style:{width:120,height:30},onChange:I(e),value:(null===(B=w(n))||void 0===B?void 0:B[e])||""},t)}},I=function(e){return function(t){if(!m[n])for(var a in m)if(m[a].childList&&m[a].childList[n])return"object"===typeof t&&(t=t.target.value),m[a].childList[n][e]=t,void u.Z.dispatch({type:"change",attributeMap:m});"object"===typeof t&&(t=t.target.value),m[n][e]=t,u.Z.dispatch({type:"change",attributeMap:m})}};return j?(0,v.jsxs)("div",{className:"rightCom",children:[(0,v.jsx)(_,{comId:n,setShowSetColumns:s,showSetColumns:r}),(0,v.jsx)(ae,{comId:n,setShowTableData:x,showSetTableData:f}),(0,v.jsxs)("div",{children:[(0,v.jsx)(B.Z,{onClick:function(){S(!1)},style:{color:"blue",cursor:"pointer",marginRight:"10px"}}),n,(0,v.jsx)("hr",{}),(t[n]||[]).map((function(e,t){return(0,v.jsxs)("div",{className:"attributeItem",children:[(0,v.jsx)("label",{children:ie[e]}),(0,v.jsx)("div",{className:"attributeItemValue",children:X(e,t)})]},t)}))]})]}):(0,v.jsx)(A.Z,{onClick:function(){S(!0)},style:{color:"blue",cursor:"pointer"}})}var oe=n(38399);n(56339),n(12137),n(30027),n(25351);function re(e){var t=e.changeActionJs,n=e.submitAction,a=e.actionJs,i=e.showAction,l=e.actionName;return(0,v.jsx)(p.Modal,{open:i,className:"editStyle",onOk:n(!0),width:600,onCancel:n(!1),closable:!1,children:(0,v.jsx)(oe.ZP,{name:"editAction",mode:"javascript",theme:"github",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2},onChange:t,value:(null===a||void 0===a?void 0:a[l])||""})})}function se(e){var t=e.changeStyleCss,n=e.submitStyle,a=e.styleCss,i=e.showStyle;return(0,v.jsx)(p.Modal,{open:i,className:"editStyle",onOk:n(!0),onCancel:n(!1),bodyStyle:{width:"800px",height:"400px"},closable:!1,children:(0,v.jsx)("textarea",{className:"textarea",onChange:t,value:a||""})})}var ue=n(16871),ce=n(75980);function de(e){var t,n,l,r,c,b,f=(0,o.useState)(!1),x=(0,i.Z)(f,2),m=x[0],g=x[1],y=(0,o.useState)({}),Z=(0,i.Z)(y,2),k=Z[0],C=Z[1],j=(0,o.useState)(""),S=(0,i.Z)(j,2),w=S[0],X=S[1],I=(0,o.useState)(!1),D=(0,i.Z)(I,2),M=D[0],T=D[1],N=(0,o.useState)(""),L=(0,i.Z)(N,2),R=L[0],V=L[1],F=(0,o.useState)(""),A=(0,i.Z)(F,2),B=A[0],J=A[1],z=(0,o.useState)("click"),P=(0,i.Z)(z,2),q=P[0],E=P[1],O=(0,o.useState)(),H=(0,i.Z)(O,2),G=(H[0],H[1]),U=(0,o.useState)(),Y=(0,i.Z)(U,2),K=(Y[0],Y[1]),W=(0,o.useState)(),_=(0,i.Z)(W,2),Q=_[0],$=_[1],ee=(0,o.useState)(),te=(0,i.Z)(ee,2),ne=te[0],ae=te[1],ie=(0,o.useState)(),le=(0,i.Z)(ie,2),oe=le[0],de=le[1],he=(0,o.useState)(),pe=(0,i.Z)(he,2),ve=pe[0],be=pe[1],fe=(0,o.useState)(!1),xe=(0,i.Z)(fe,2),me=xe[0],ge=xe[1],ye=(0,o.useState)(!1),Ze=(0,i.Z)(ye,2),ke=Ze[0],Ce=Ze[1],je=(0,o.useState)({}),Se=(0,i.Z)(je,2),we=(Se[0],Se[1]),Xe=(0,ue.TH)().state,Ie=p.message.useMessage(),De=(0,i.Z)(Ie,2),Me=De[0],Te=De[1],Ne={XinForm:[400,200],XinMenu:[600,100],XinRadioGroup:[250,40],XinCard:[300,400],XinFlex:[400,400],XinCarousel:[600,200]},Le=function(e){var t=[{label:"\u8bbe\u7f6e\u5c5e\u6027",key:"setAttribute"},{label:"\u8bbe\u7f6e\u6837\u5f0f",key:"setStyle"}];switch(e){case"XinButton":case"XinLable":case"XinIcon":case"XinDiv":t.push({label:"\u8bbe\u7f6e\u52a8\u4f5c",key:"setAction",children:[{label:"onClick\u4e8b\u4ef6",key:"setClick"}]});break;case"XinCheckBox":case"XinDatePicker":case"XinInput":case"XinMenu":case"XinNumber":case"XinRadioGroup":case"XinCarousel":t.push({label:"\u8bbe\u7f6e\u52a8\u4f5c",key:"setAction",children:[{label:"onChange\u4e8b\u4ef6",key:"setChange"}]});break;case"XinRadio":t.push({label:"\u8bbe\u7f6e\u52a8\u4f5c",key:"setAction",children:[{label:"onClick\u4e8b\u4ef6",key:"setClick"},{label:"onChange\u4e8b\u4ef6",key:"setChange"}]})}return t},Re=d().cloneDeep(u.Z.getState().attributeMap),Ve=e.NowCom,Fe=e.changeRightPanel,Ae="";(0,h.Z)((function(){we({})})),(0,o.useEffect)((function(){null!==Xe&&void 0!==Xe&&Xe.pageId?ce.Z.post("http://".concat(window.location.hostname,":3003/pageJson/findPageByID"),{pageId:Xe.pageId}).then((function(e){var t;Re=(null===(t=e.data.data)||void 0===t?void 0:t.pageJson)||{},u.Z.dispatch({type:"change",attributeMap:Re})})).catch((function(e){Me.open({type:"error",content:"\u83b7\u53d6\u9875\u9762\u8be6\u60c5\u5931\u8d25"})})):Me.open({type:"error",content:"\u83b7\u53d6\u9875\u9762\u8be6\u60c5\u5931\u8d25"})}),[]),(0,o.useEffect)((function(){var e,t;C(null===(e=Pe(w))||void 0===e?void 0:e.actionJs),V(null===(t=Pe(B))||void 0===t?void 0:t.styleCss)}),[m,M]);var Be=function(e,t,n){var a;for(var i in Re)["XinForm","XinMenu","XinRadioGroup","XinCard","XinFlex","XinCarousel"].includes(Re[i].comType)&&parseInt(Re[i].style.left)<e&&parseInt(Re[i].style.left)+(Re[i].style.width||Ne[Re[i].comType][0])>e&&parseInt(Re[i].style.top)<t&&parseInt(Re[i].style.top)+(Re[i].style.height||Ne[Re[i].comType][1])>t&&(a=Re[i]);if(a)return delete n.style,a.childList||(a.childList={}),a.childList[n.comId]=n,u.Z.dispatch({type:"change",attributeMap:Re}),!0},Je=function(e){Ae=e.target.id,t=e.clientX,n=e.clientY,c=e.target.offsetLeft,b=e.target.offsetTop,e.target.offsetWidth,e.target.offsetHeight},ze=function(e,t,n,a){"attribute"===n?Fe(t,e):"action"===n?(X(e),C({}),g(!0),E(a)):"style"===n&&(J(e),V(""),T(!0))},Pe=function(e){for(var t in Re){if(t===e)return Re[t];if(Re[t].childList)for(var n in Re[t].childList)if(n===e)return Re[t].childList[n]}},qe=function(e,t,n,a){if("attribute"===n)switch(e){case"XinButton":ze(t,["attributeValue","visible","buttonType","size","disabled","danger","ghost"],"attribute");break;case"XinInput":ze(t,["attributeValue","visible","addonBefore","addonAfter","placeholder","size","prefix","suffix","allowClear","label","required","requiredMessage"],"attribute");break;case"XinLable":ze(t,["attributeValue","visible"],"attribute");break;case"XinCheckBox":ze(t,["attributeValue","visible","disabled","checked","label","required","requiredMessage"],"attribute");break;case"XinRadio":ze(t,["attributeValue","visible","disabled","checked"],"attribute");break;case"XinForm":ze(t,["visible","disabled","size","layout","colon","labelAlign"],"attribute");break;case"XinRadioGroup":ze(t,["visible","disabled","buttonStyle","optionType","size","selectedID"],"attribute");break;case"XinIcon":ze(t,["visible","iconType","twoToneColor","rotate"],"attribute");break;case"XinMenu":ze(t,["visible","mode","selectedKey"],"attribute");break;case"XinDatePicker":ze(t,["attributeValue","visible","picker","showTime","dateFormat","disabled","size","allowClear","label","required","requiredMessage"],"attribute");break;case"XinNumber":ze(t,["attributeValueNumber","visible","placeholder","size","prefix","allowClear","max","min","label","required","requiredMessage","step"],"attribute");break;case"XinRate":ze(t,["allowHalf","count","disabled"],"attribute");break;case"XinCard":ze(t,["bordered","size","title","visible"],"attribute");break;case"XinTable":ze(t,["setColumns","setTableData","bordered","showHeader","size"],"attribute");break;case"XinFlex":case"XinDiv":ze(t,["visible"],"attribute");break;case"XinLink":ze(t,["visible","attributeValue","pageUrl"],"attribute");break;case"XinCarousel":ze(t,["visible","autoplay"],"attribute")}else"action"===n?ze(t,["attributeValue"],"action",a):"style"===n&&ze(t,["attributeValue"],"style")},Ee=function e(t,n){var i,l,o=s[t.comType];!o&&t.defineComJs&&(o=new Function(t.defineComJs)());return o?(0,v.jsx)("div",{id:t.comId,onDragStart:Je,draggable:!n,style:t.style,children:(0,v.jsx)(p.Dropdown,{menu:{items:Le(t.comType),onClick:(i=t.comType,l=t.comId,function(e){switch(e.key){case"setAttribute":qe(i,l,"attribute");break;case"setStyle":qe(i,l,"style");break;case"setClick":qe(i,l,"action","click");break;case"setChange":qe(i,l,"action","change")}})},trigger:["contextMenu"],children:(0,v.jsx)("div",{onContextMenu:function(e){e.stopPropagation()},children:(0,v.jsx)(o,(0,a.Z)((0,a.Z)({},Pe(t.comId)),{},{children:Object.keys(t.childList||{}).map((function(n){return e(t.childList[n],!0)}))}))})})},t.comId):(0,v.jsx)(v.Fragment,{})};return(0,v.jsxs)("div",{onDrop:function(e){var a;l=e.clientX,r=e.clientY,a=t&&n?{position:"absolute",left:l-t+c+"px",top:r-n+b+"px",zIndex:100}:{position:"absolute",left:e.clientX+"px",top:e.clientY+"px",zIndex:100};var i=Pe(Ae);if(i)i.style=a;else{var o={style:a,comId:Ve.name+e.clientX,comType:Ve.name};if(Be(e.clientX,e.clientY,o))return;"defineCom"===o.comType&&(X(o.comId),g(!0)),Re[o.comId]=o}u.Z.dispatch({type:"change",attributeMap:Re})},onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault()},className:"renderCom",children:[Te,Object.keys(Re).map((function(e){return Ee(Re[e])})),(0,v.jsx)("div",{style:{display:ke?"block":"none",border:"1px solid blue",width:Math.abs(oe-Q)+"px",height:Math.abs(ve-ne)+"px",position:"absolute",left:Q<oe?Q:oe+"px",top:ne<ve?ne:ve+"px"}}),(0,v.jsx)(re,{actionName:q,showAction:m,changeActionJs:function(e){var t={};t[q]=e,C(t)},actionJs:k,submitAction:function(e){return function(){if(e){var t=Pe(w);if("defineCom"===t.comType)return t.defineComJs=null===k||void 0===k?void 0:k[q],u.Z.dispatch({type:"change",attributeMap:Re}),void g(!1);t.actionJs||(t.actionJs={}),t.actionJs[q]=null===k||void 0===k?void 0:k[q],u.Z.dispatch({type:"change",attributeMap:Re})}g(!1)}}}),(0,v.jsx)(se,{showStyle:M,changeStyleCss:function(e){V(e.target.value)},styleCss:R,submitStyle:function(e){return function(){e&&(Pe(B).styleCss=R,u.Z.dispatch({type:"change",attributeMap:Re}));T(!1)}}}),(0,v.jsx)("div",{onMouseUp:function(e){ge(!1),Ce(!1),G(oe-Q),K(ve-ne)},onMouseMove:function(e){me&&(de(e.clientX),be(e.clientY),Ce(!0))},onMouseDown:function(e){$(e.clientX),ae(e.clientY),ge(!0),Ce(!1)},style:{width:"60%",height:"100%",position:"absolute",zIndex:"10"}})]})}var he=n(40447),pe=n(37295);function ve(e){var t=(0,o.useState)({}),n=(0,i.Z)(t,2),a=(n[0],n[1]),l=(0,o.useState)(!0),r=(0,i.Z)(l,2),s=r[0],c=r[1],b=(0,ue.TH)().state,f=p.message.useMessage(),x=(0,i.Z)(f,2),m=x[0],g=x[1];(0,h.Z)((function(){a({})}));var y=(0,ue.s0)(),Z=d().cloneDeep(u.Z.getState().attributeMap);return s?(0,v.jsxs)("div",{className:"designTop",children:[g,(0,v.jsx)(he.Z,{onClick:function(){c(!1)},style:{color:"blue",cursor:"pointer",position:"absolute",left:"1000px",zIndex:"10000"}}),(0,v.jsx)(p.Image,{width:30,height:30,style:{position:"relative",left:"300px"},src:"https://tpc.googlesyndication.com/simgad/13961833089927279457/14763004658117789537?w=200&h=200"}),(0,v.jsx)("span",{style:{position:"relative",left:"320px",fontSize:"24px",top:"4px",fontStyle:"italic"},children:"XinBuilder"}),(0,v.jsx)(p.Button,{style:{width:80,height:30},type:"primary",ghost:!0,onClick:function(){ce.Z.post("http://".concat(window.location.hostname,":3003/pageJson/updatePage"),{pageId:b.pageId,pageJson:Z}).then((function(e){m.open({type:"success",content:"\u4fdd\u5b58\u6210\u529f"}),setTimeout((function(){y("/")}),600)})).catch((function(e){m.open({type:"error",content:"\u4fdd\u5b58\u5931\u8d25"})}))},children:"\u4fdd\u5b58"}),(0,v.jsx)(p.Button,{style:{width:80,height:30},type:"primary",ghost:!0,onClick:function(){y("/")},children:"\u8fd4\u56de"})]}):(0,v.jsx)(pe.Z,{onClick:function(){c(!0)},style:{color:"blue",cursor:"pointer",position:"absolute",left:"1000px",zIndex:"10000"}})}var be=function(){var e=(0,o.useState)(),t=(0,i.Z)(e,2),n=t[0],l=t[1],r=(0,o.useState)({}),s=(0,i.Z)(r,2),u=s[0],c=s[1],d=(0,o.useState)(),h=(0,i.Z)(d,2),p=h[0],b=h[1];return(0,v.jsxs)("div",{className:"App",children:[(0,v.jsx)(ve,{}),(0,v.jsx)(q,{changeTopCom:function(e){l(e)}}),(0,v.jsx)(de,{comId:p,changeRightPanel:function(e,t){u[t]=e,b(t),c((0,a.Z)({},u))},NowCom:n}),(0,v.jsx)(le,{comId:p,rightPanel:u})]})}}}]);
//# sourceMappingURL=29.6911fd92.chunk.js.map