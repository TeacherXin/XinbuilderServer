"use strict";(self.webpackChunkddm_demo=self.webpackChunkddm_demo||[]).push([[38],{21038:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var i=n(70885),o=n(87363),a=n(81821),c=n(16871),r=n(75980),d=n(78222),s=n(30501),l=n(82622),u=n(59155),p=n(80184),h=a.Input.Search;function f(){var t=(0,c.s0)(),e=a.message.useMessage(),n=(0,i.Z)(e,2),f=n[0],w=n[1],x=(0,o.useState)([]),m=(0,i.Z)(x,2),g=m[0],y=m[1],v=(0,o.useState)(!1),I=(0,i.Z)(v,2),j=I[0],C=I[1],b=(0,o.useState)(""),k=(0,i.Z)(b,2),Z=k[0],M=k[1],N=(0,o.useState)(""),S=(0,i.Z)(N,2),B=S[0],P=S[1];(0,o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user")||"{}");e&&r.Z.post("http://".concat(window.location.hostname,":3003/login/getUser"),{username:e.username,password:e.password}).then((function(e){e.data.data?E():t("/login")}))}),[]),(0,o.useEffect)((function(){window.stackIndex=0,window.attributeStack=[]}),[]);var D,E=function(){var t=JSON.parse(localStorage.getItem("user")||"{}");r.Z.post("http://".concat(window.location.hostname,":3003/pageJson/findAllPage"),{username:t.username}).then((function(t){y(t.data.data)})).catch((function(t){f.open({type:"error",content:"\u83b7\u53d6\u9875\u9762\u5217\u8868\u5931\u8d25"})}))},L=function(e){return function(){u.Z.dispatch({type:"change",attributeMap:{}}),t("/home",{state:{pageId:e}})}},J=function(e){return function(){t("/metaRender",{state:{pageId:e}})}};return(0,p.jsxs)("div",{className:"PageList",children:[w,(0,p.jsxs)("div",{className:"pageLeft",children:[(0,p.jsx)("div",{className:"leftHeader",children:"XinBuilder"}),(0,p.jsx)("div",{className:"leftDiscribe",children:"\u8f7b\u91cf\u7ea7\u7684\u4f4e\u4ee3\u7801\u5e73\u53f0"}),(0,p.jsx)(a.Divider,{}),(0,p.jsx)(a.Button,{onClick:function(){window.open("http://localhost:3001/#/dataBase")},size:"large",type:"link",children:"\u6784\u5efa\u6570\u636e\u5e93"}),(0,p.jsx)(d.Z,{}),(0,p.jsx)(a.Divider,{}),(0,p.jsx)(a.Button,{onClick:function(){window.open("http://localhost:3000/#/")},size:"large",type:"link",children:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6"}),(0,p.jsx)(s.Z,{}),(0,p.jsx)(a.Divider,{})]}),(0,p.jsxs)("div",{className:"pageRight",children:[(0,p.jsxs)("div",{className:"PageHeader",children:[(0,p.jsx)(h,{style:{width:304},onSearch:function(t){P(t)}}),(0,p.jsx)(a.Button,{className:"pageButton",onClick:function(){C(!0),M("")},children:"\u65b0\u5efa\u9875\u9762"}),(0,p.jsxs)("div",{style:{display:"flex",float:"right"},children:[(0,p.jsx)(a.Button,{onClick:function(){window.open("http://localhost:9000/#/Xinbuilder/createPage")},type:"link",children:"\u4f7f\u7528\u6587\u6863"}),(0,p.jsx)(a.Button,{type:"link",children:"API\u53c2\u8003"}),(0,p.jsx)(a.Button,{type:"link",children:"\u751f\u6001\u7cfb\u7edf"}),(0,p.jsx)(a.Button,{onClick:function(){localStorage.removeItem("user"),t("/login")},type:"link",children:"\u9000\u51fa\u767b\u5f55"})]})]}),(0,p.jsx)(a.Divider,{}),(0,p.jsx)("div",{className:"PageBody",children:(0,p.jsx)(a.Row,{style:{width:"100%"},gutter:16,children:(D=g,(D||[]).filter((function(t){return t.pageName.indexOf(B)>-1}))||[]).map((function(t){return(0,p.jsx)(a.Col,{style:{marginTop:"10px"},span:6,children:(0,p.jsx)(a.Card,{title:(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:t.pageName||"\u533f\u540d"}),(0,p.jsx)(l.Z,{onClick:(e=t.pageId,function(){r.Z.post("http://".concat(window.location.hostname,":3003/pageJson/deletePage"),{pageId:e}).then((function(t){f.open({type:"success",content:"\u5220\u9664\u6210\u529f"}),E()})).catch((function(t){f.open({type:"error",content:"\u5220\u9664\u5931\u8d25"})}))}),style:{float:"right",cursor:"pointer"}})]}),bordered:!1,headStyle:{fontSize:"14px"},children:(0,p.jsxs)("div",{style:{height:"50px"},children:[(0,p.jsx)(a.Button,{type:"text",onClick:L(t.pageId),children:"\u7f16\u8f91\u9875\u9762"}),(0,p.jsx)(a.Button,{type:"text",onClick:J(t.pageId),children:"\u9884\u89c8\u9875\u9762"})]})})},t._id);var e}))})})]}),(0,p.jsx)(a.Modal,{title:"\u521b\u5efa\u9875\u9762",open:j,onOk:function(){var t=JSON.parse(localStorage.getItem("user")||"{}");r.Z.post("http://".concat(window.location.hostname,":3003/pageJson/addPage"),{pageName:Z,pageId:"pageInfo_"+(new Date).getTime(),pageJson:{},username:t.username}).then((function(t){f.open({type:"success",content:"\u65b0\u5efa\u9875\u9762\u6210\u529f"}),E(),C(!1),u.Z.dispatch({type:"change",attributeMap:{}})})).catch((function(t){f.open({type:"error",content:"\u65b0\u5efa\u9875\u9762\u5931\u8d25"})}))},onCancel:function(){C(!1)},children:(0,p.jsx)(a.Input,{addonBefore:"\u9875\u9762\u540d\u79f0",value:Z,onChange:function(t){M(t.target.value)}})})]})}},59155:function(t,e,n){n.d(e,{Z:function(){return h}});var i=n(1413),o=n(69829),a=n(763),c=n.n(a),r=n(75980),d=(0,n(63368).q_)();window.xinCtx={},window.xinComEvent={},window.proxyAttributeMap=function(){var t=window.xinCtx,e=s(t);window.xinCtx=e},window.findNodeByComId=function(t,e){var n;return function t(e,i){for(var o in i)o===e?n=i[o]:i[o].childList&&t(e,i[o].childList)}(t,e),n};var s=function t(e){for(var n in e)"object"===typeof e[n]&&(e[n]=t(e[n]));return new Proxy(e,{set:function(e,n,i,o){return"object"===typeof i?(e[n]=t(i),h.dispatch({type:"change",attributeMap:e,comId:e.comId}),!0):(e[n]=i,h.dispatch({type:"change",attributeMap:e,comId:e.comId}),!0)},deleteProperty:function(t,e){return delete t[e],h.dispatch({type:"change",attributeMap:t,comId:t.comId}),!0}})};window.xinComEvent.copyNode=function(t){var e=c().cloneDeep(t);if(e.comId=e.comType+Math.random(),e.childList){var n={};Object.keys(e.childList).forEach((function(t){var i=window.xinComEvent.copyNode(e.childList[t]);n[i.comId]=i})),e.childList=n}return e},window.xinComEvent.addNode=function(t,e,n){t.style={left:parseInt(t.style.left)+n+"px",top:parseInt(t.style.top)+e+"px",position:"absolute",zIndex:100},t.comId+=((new Date).getTime()+"").slice(6),window.xinCtx[t.comId]=t},window.xinComEvent.toPageById=function(t){d.push("/metaRender",{pageId:t}),window.location.replace(window.location.href)},window.xinComEvent.sendAjax=function(t,e,n,i,o){"create"===t?r.Z.post("http://".concat(window.location.hostname,":3003/entity/addEntityItem"),{entityParam:n,entityCode:e}).then((function(t){i(t)})).catch((function(t){o(t)})):"find"===t&&r.Z.post("http://".concat(window.location.hostname,":3003/entity/getEntityItem"),{entityParam:n,entityCode:e}).then((function(t){i(t)})).catch((function(t){o(t)}))};var l={attributeMap:{}},u=function(t,e,n){for(var i in t){if(i===e)return t[i]=n;if(t[i].childList)for(var o in t[i].childList)o===e&&(t[i].childList[o]=n)}},p=function(t){if(0!=Object.keys(t)){var e=window.attributeStack||[];e.push(t),window.attributeStack=e,window.stackIndex=window.stackIndex?window.stackIndex+1:e.length}};var h=(0,o.xC)({reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments.length>1?arguments[1]:void 0;if("change"===e.type){if(e.lineFlag||p(e.attributeMap),e.comId){var n=c().cloneDeep(t.attributeMap);return u(n,e.comId,e.attributeMap),window.xinCtx=c().cloneDeep(n),window.proxyAttributeMap(),(0,i.Z)((0,i.Z)({},t),{},{attributeMap:n})}return window.xinCtx=c().cloneDeep(e.attributeMap),window.proxyAttributeMap(),(0,i.Z)((0,i.Z)({},t),{},{attributeMap:c().cloneDeep(e.attributeMap)})}return t},middleware:function(t){return t({serializableCheck:!1})}})}}]);
//# sourceMappingURL=38.0dba18b5.chunk.js.map