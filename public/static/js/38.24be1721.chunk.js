"use strict";(self.webpackChunkddm_demo=self.webpackChunkddm_demo||[]).push([[38],{21038:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n(70885),o=n(87363),a=n(81821),c=n(16871),r=n(75980),d=n(82622),s=n(59155),p=n(80184),u=a.Input.Search;function l(){var e=(0,c.s0)(),t=a.message.useMessage(),n=(0,i.Z)(t,2),l=n[0],h=n[1],f=(0,o.useState)([]),x=(0,i.Z)(f,2),g=x[0],w=x[1],m=(0,o.useState)(!1),y=(0,i.Z)(m,2),v=y[0],j=y[1],I=(0,o.useState)(""),b=(0,i.Z)(I,2),C=b[0],M=b[1],Z=(0,o.useState)(""),N=(0,i.Z)(Z,2),k=N[0],B=N[1];(0,o.useEffect)((function(){P()}),[]);var D,P=function(){r.Z.get("http://".concat(window.location.hostname,":3003/pageJson/findAllPage")).then((function(e){w(e.data.data)})).catch((function(e){l.open({type:"error",content:"\u83b7\u53d6\u9875\u9762\u5217\u8868\u5931\u8d25"})}))},S=function(t){return function(){s.Z.dispatch({type:"change",attributeMap:{}}),e("/home",{state:{pageId:t}})}},A=function(t){return function(){e("/metaRender",{state:{pageId:t}})}};return(0,p.jsxs)("div",{className:"PageList",children:[h,(0,p.jsxs)("div",{className:"pageLeft",children:[(0,p.jsx)("div",{className:"leftHeader",children:"XinBuilder"}),(0,p.jsx)("div",{className:"leftDiscribe",children:"\u8f7b\u91cf\u7ea7\u7684\u4f4e\u4ee3\u7801\u5e73\u53f0"}),(0,p.jsx)(a.Divider,{})]}),(0,p.jsxs)("div",{className:"pageRight",children:[(0,p.jsxs)("div",{className:"PageHeader",children:[(0,p.jsx)(u,{style:{width:304},onSearch:function(e){B(e)}}),(0,p.jsx)(a.Button,{className:"pageButton",onClick:function(){j(!0),M("")},children:"\u65b0\u5efa\u9875\u9762"}),(0,p.jsxs)("div",{style:{display:"flex",float:"right"},children:[(0,p.jsx)(a.Button,{type:"link",children:"\u4f7f\u7528\u6587\u6863"}),(0,p.jsx)(a.Button,{type:"link",children:"API\u53c2\u8003"}),(0,p.jsx)(a.Button,{type:"link",children:"\u751f\u6001\u7cfb\u7edf"})]})]}),(0,p.jsx)(a.Divider,{}),(0,p.jsx)("div",{className:"PageBody",children:(0,p.jsx)(a.Row,{style:{width:"100%"},gutter:16,children:(D=g,D.filter((function(e){return e.pageName.indexOf(k)>-1}))||[]).map((function(e){return(0,p.jsx)(a.Col,{style:{marginTop:"10px"},span:6,children:(0,p.jsx)(a.Card,{title:(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:e.pageName||"\u533f\u540d"}),(0,p.jsx)(d.Z,{onClick:(t=e.pageId,function(){r.Z.post("http://".concat(window.location.hostname,":3003/pageJson/deletePage"),{pageId:t}).then((function(e){l.open({type:"success",content:"\u5220\u9664\u6210\u529f"}),P()})).catch((function(e){l.open({type:"error",content:"\u5220\u9664\u5931\u8d25"})}))}),style:{float:"right",cursor:"pointer"}})]}),bordered:!1,headStyle:{fontSize:"14px"},children:(0,p.jsxs)("div",{style:{height:"50px"},children:[(0,p.jsx)(a.Button,{type:"text",onClick:S(e.pageId),children:"\u7f16\u8f91\u9875\u9762"}),(0,p.jsx)(a.Button,{type:"text",onClick:A(e.pageId),children:"\u9884\u89c8\u9875\u9762"})]})})},e._id);var t}))})})]}),(0,p.jsx)(a.Modal,{title:"\u521b\u5efa\u9875\u9762",open:v,onOk:function(){r.Z.post("http://".concat(window.location.hostname,":3003/pageJson/addPage"),{pageName:C,pageId:"pageInfo_"+(new Date).getTime(),pageJson:{}}).then((function(e){l.open({type:"success",content:"\u65b0\u5efa\u9875\u9762\u6210\u529f"}),P(),j(!1),s.Z.dispatch({type:"change",attributeMap:{}})})).catch((function(e){l.open({type:"error",content:"\u65b0\u5efa\u9875\u9762\u5931\u8d25"})}))},onCancel:function(){j(!1)},children:(0,p.jsx)(a.Input,{addonBefore:"\u9875\u9762\u540d\u79f0",value:C,onChange:function(e){M(e.target.value)}})})]})}},59155:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(1413),o=n(69829),a=n(763),c=n.n(a),r=(0,n(63368).q_)();window.xinCtx={},window.xinComEvent={},window.proxyAttributeMap=function(){var e=window.xinCtx,t=d(e);window.xinCtx=t};var d=function e(t){for(var n in t)"object"===typeof t[n]&&(t[n]=e(t[n]));return new Proxy(t,{set:function(t,n,i,o){return"object"===typeof i?(t[n]=e(i),u.dispatch({type:"change",attributeMap:t,comId:t.comId}),!0):(t[n]=i,u.dispatch({type:"change",attributeMap:t,comId:t.comId}),!0)},deleteProperty:function(e,t){return delete e[t],u.dispatch({type:"change",attributeMap:e,comId:e.comId}),!0}})};window.xinComEvent.copyNode=function(e){return c().cloneDeep(e)},window.xinComEvent.addNode=function(e,t,n){e.style={left:parseInt(e.style.left)+n+"px",top:parseInt(e.style.top)+t+"px",position:"absolute",zIndex:100},e.comId+=((new Date).getTime()+"").slice(6),window.xinCtx[e.comId]=e},window.xinComEvent.toPageById=function(e){r.push("/metaRender",{pageId:e}),window.location.replace(window.location.href)};var s={attributeMap:{}},p=function(e,t,n){for(var i in e){if(i===t)return e[i]=n;if(e[i].childList)for(var o in e[i].childList)o===t&&(e[i].childList[o]=n)}};var u=(0,o.xC)({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if("change"===t.type){if(t.comId){var n=c().cloneDeep(e.attributeMap);return p(n,t.comId,t.attributeMap),window.xinCtx=c().cloneDeep(n),window.proxyAttributeMap(),(0,i.Z)((0,i.Z)({},e),{},{attributeMap:n})}return window.xinCtx=c().cloneDeep(t.attributeMap),window.proxyAttributeMap(),(0,i.Z)((0,i.Z)({},e),{},{attributeMap:c().cloneDeep(t.attributeMap)})}return e}})}}]);
//# sourceMappingURL=38.24be1721.chunk.js.map