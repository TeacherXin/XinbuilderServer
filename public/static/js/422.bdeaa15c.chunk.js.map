{"version":3,"file":"static/js/422.bdeaa15c.chunk.js","mappings":"yRASe,SAASA,IACtB,IAAMC,GAAQC,EAAAA,EAAAA,MAAcD,MAC5B,GAA2BE,EAAAA,EAAAA,YAAU,eAAvBC,GAAD,KAAU,MACvB,EAAoCC,EAAAA,QAAAA,aAAoB,eAAjDC,EAAU,KAAEC,EAAa,KAC5BC,EAAeC,IAAAA,UAAYC,EAAAA,EAAAA,WAAiBF,eAEhDG,EAAAA,EAAAA,YAAU,WACA,OAALV,QAAK,IAALA,GAAAA,EAAOW,OACRC,EAAAA,EAAAA,KAAW,UAAD,OAAWC,OAAOC,SAASC,SAAQ,+BAA8B,CACzEJ,OAAQX,EAAMW,SAEfK,MAAK,SAAAC,GACJR,EAAAA,EAAAA,SAAe,CAACS,KAAK,SAASX,aAAaU,EAAIE,KAAKA,KAAKC,UAC3D,IACCC,OAAM,SAAAC,GACLjB,EAAWkB,KAAK,CACdL,KAAM,QACNM,QAAS,oDAEb,IAEAnB,EAAWkB,KAAK,CACdL,KAAM,QACNM,QAAS,oDAGf,GAAE,CAACxB,KAEHyB,EAAAA,EAAAA,IAAc,WACZtB,EAAU,CAAC,EACb,IAEA,IAAMuB,EAAe,SAAfA,EAAgBC,GACpB,IAAIC,EAAMC,EAAYF,EAAKG,SACvBF,GAA0B,cAAnBD,EAAKI,YAEdH,EADU,IAAII,SAAS,UAAYL,EAAKM,UAClCC,IAER,OAAIN,GAGG,gBAAKO,GAAIR,EAAKS,MAAwBC,MAAOV,EAAKU,MAAM,UAC5D,SAACT,GAAG,kBACCf,OAAOyB,gBAAgBX,EAAKS,MAAM7B,IAAa,aAG/CgC,OAAOC,KAAKb,EAAKc,WAAa,CAAC,GAAGC,KAAI,SAAAC,GACpC,OAAOjB,EAAaC,EAAKc,UAAUE,GACrC,QAPyBhB,EAAKS,QAF7B,uBAcX,EAEA,OACE,2BACG9B,EACCiC,OAAOC,KAAKjC,GAAemC,KAAI,SAAAf,GAC/B,OAAOD,EAAanB,EAAaoB,GACnC,MAGN,C","sources":["MetaRender/index.js"],"sourcesContent":["import React, { useState,useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport * as myComponent from '../Component'\nimport { message } from 'antd'\nimport subscribeHook from '../DefineHook/subscribe'\nimport axios from 'axios'\nimport Store from '../Store'\nimport _ from 'lodash'\n\nexport default function MetaRender() {\n  const state = useLocation().state;\n  const [update,setUpdate] = useState();\n  const [messageApi, contextHolder] = message.useMessage();\n  let attributeMap = _.cloneDeep(Store.getState().attributeMap);\n\n  useEffect(() => {\n    if(state?.pageId){\n      axios.post(`http://${window.location.hostname}:3003/pageJson/findPageByID`,{\n        pageId: state.pageId\n      })\n      .then(res => {\n        Store.dispatch({type:'change',attributeMap:res.data.data.pageJson})\n      })\n      .catch(err => {\n        messageApi.open({\n          type: 'error',\n          content: '获取页面详情失败',\n        });\n      })\n    }else{\n      messageApi.open({\n        type: 'error',\n        content: '获取页面详情失败',\n      });\n    }\n  },[state])\n\n  subscribeHook(() => {\n    setUpdate({})\n  })\n\n  const getComponent = (item) => {\n    let Com = myComponent[item.comType];\n    if(!Com && item.groupType === 'defineCom'){\n      let fun = new Function('return ' + item.component)\n      Com = fun();\n    }\n    if(!Com){\n      return <></>\n    }\n    return <div id={item.comId} key={item.comId} style={item.style}>\n      {<Com\n        {...window.findNodeByComId(item.comId,attributeMap)}\n        >\n          {\n            Object.keys(item.childList || {}).map(_item => {\n              return getComponent(item.childList[_item])\n            })\n          }\n        </Com>\n      }\n    </div>\n  }\n\n  return (\n    <div>\n      {contextHolder}\n      {(Object.keys(attributeMap)).map(item => {\n        return getComponent(attributeMap[item])\n      })}\n    </div>\n  )\n}\n"],"names":["MetaRender","state","useLocation","useState","setUpdate","message","messageApi","contextHolder","attributeMap","_","Store","useEffect","pageId","axios","window","location","hostname","then","res","type","data","pageJson","catch","err","open","content","subscribeHook","getComponent","item","Com","myComponent","comType","groupType","Function","component","fun","id","comId","style","findNodeByComId","Object","keys","childList","map","_item"],"sourceRoot":""}